<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Weather App</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        body {
            font-family: 'Poppins', sans-serif;
        }
        .weather-card {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        .icon-bg {
            background: rgba(0, 0, 0, 0.2);
        }
    </style>
</head>
<body class="bg-gray-900 text-white flex items-center justify-center min-h-screen p-4">

    <div class="w-full max-w-md mx-auto">
        
        <!-- Added Heading -->
        <h1 class="text-4xl font-bold text-white text-center mb-8">Weather App</h1>

        <div class="weather-card rounded-2xl p-6 md:p-8 shadow-2xl">

            <!-- Search Form -->
            <form id="search-form" class="flex items-center gap-2 mb-6">
                <input
                    type="text"
                    id="city-input"
                    placeholder="Enter city name..."
                    class="w-full bg-gray-800 text-white placeholder-gray-500 px-4 py-3 rounded-lg border border-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-500 transition"
                >
                <button type="submit" class="bg-blue-600 hover:bg-blue-700 text-white p-3 rounded-lg transition">
                    <i data-lucide="search"></i>
                </button>
                <button type="button" id="location-btn" class="bg-gray-700 hover:bg-gray-600 text-white p-3 rounded-lg transition">
                    <i data-lucide="map-pin"></i>
                </button>
            </form>

            <!-- Loading Spinner -->
            <div id="loading" class="text-center hidden">
                <div class="animate-spin rounded-full h-12 w-12 border-b-2 border-white mx-auto"></div>
                <p class="mt-2 text-gray-400">Fetching weather...</p>
            </div>

            <!-- Error Message -->
            <div id="error-message" class="text-center text-red-400 hidden p-4 bg-red-900/50 rounded-lg">
                <p id="error-text"></p>
            </div>

            <!-- Weather Display -->
            <div id="weather-display" class="text-center hidden">
                <h2 id="city-name" class="text-4xl font-bold"></h2>
                <div id="weather-icon" class="my-6 w-32 h-32 mx-auto icon-bg rounded-full flex items-center justify-center">
                    <!-- Weather icon will be injected here by JS -->
                </div>
                <p id="temperature" class="text-6xl font-bold"></p>
                <p id="description" class="text-xl text-gray-400 capitalize"></p>

                <div class="grid grid-cols-2 gap-4 mt-8 text-left">
                    <div class="flex items-center gap-3">
                        <i data-lucide="thermometer-sun" class="text-blue-400"></i>
                        <div>
                            <p class="text-gray-400">Feels Like</p>
                            <p id="feels-like" class="font-semibold"></p>
                        </div>
                    </div>
                    <div class="flex items-center gap-3">
                        <i data-lucide="droplets" class="text-blue-400"></i>
                        <div>
                            <p class="text-gray-400">Humidity</p>
                            <p id="humidity" class="font-semibold"></p>
                        </div>
                    </div>
                    <div class="flex items-center gap-3">
                        <i data-lucide="wind" class="text-blue-400"></i>
                        <div>
                            <p class="text-gray-400">Wind Speed</p>
                            <p id="wind-speed" class="font-semibold"></p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Initial Placeholder -->
            <div id="placeholder" class="text-center text-gray-500 py-12">
                <i data-lucide="cloud-sun" class="w-16 h-16 mx-auto mb-4"></i>
                <p>Enter a city or use your location to see the weather.</p>
            </div>

        </div>
    </div>

    <script>
        const apiKey = 'YOUR_API_KEY_HERE'; // <-- IMPORTANT: PASTE YOUR API KEY HERE

        const searchForm = document.getElementById('search-form');
        const cityInput = document.getElementById('city-input');
        const locationBtn = document.getElementById('location-btn');

        const loading = document.getElementById('loading');
        const errorMessage = document.getElementById('error-message');
        const errorText = document.getElementById('error-text');
        const weatherDisplay = document.getElementById('weather-display');
        const placeholder = document.getElementById('placeholder');

        const cityName = document.getElementById('city-name');
        const weatherIcon = document.getElementById('weather-icon');
        const temperature = document.getElementById('temperature');
        const description = document.getElementById('description');
        const feelsLike = document.getElementById('feels-like');
        const humidity = document.getElementById('humidity');
        const windSpeed = document.getElementById('wind-speed');

        // Event Listeners
        searchForm.addEventListener('submit', (e) => {
            e.preventDefault();
            const city = cityInput.value.trim();
            if (city) {
                getWeatherByCity(city);
            }
        });

        locationBtn.addEventListener('click', () => {
            getWeatherByLocation();
        });

        // Functions
        function showLoading() {
            weatherDisplay.classList.add('hidden');
            errorMessage.classList.add('hidden');
            placeholder.classList.add('hidden');
            loading.classList.remove('hidden');
        }

        function hideLoading() {
            loading.classList.add('hidden');
        }

        function showError(message) {
            hideLoading();
            weatherDisplay.classList.add('hidden');
            placeholder.classList.add('hidden');
            errorText.textContent = message;
            errorMessage.classList.remove('hidden');
        }

        function showWeather() {
            hideLoading();
            errorMessage.classList.add('hidden');
            placeholder.classList.add('hidden');
            weatherDisplay.classList.remove('hidden');
        }

        async function getWeatherByCity(city) {
            if (apiKey === 'YOUR_API_KEY_HERE') {
                showError("Please add your OpenWeatherMap API key in the script.");
                return;
            }
            showLoading();
            try {
                const response = await fetch(`https://api.openweathermap.org/data/2.5/weather?q=${city}&appid=${apiKey}&units=metric`);
                if (!response.ok) {
                    throw new Error('City not found. Please try another city.');
                }
                const data = await response.json();
                displayWeatherData(data);
            } catch (error) {
                showError(error.message);
            }
        }

        function getWeatherByLocation() {
             if (apiKey === 'YOUR_API_KEY_HERE') {
                showError("Please add your OpenWeatherMap API key in the script.");
                return;
            }
            if (navigator.geolocation) {
                showLoading();
                navigator.geolocation.getCurrentPosition(async (position) => {
                    const { latitude, longitude } = position.coords;
                    try {
                        const response = await fetch(`https://api.openweathermap.org/data/2.5/weather?lat=${latitude}&lon=${longitude}&appid=${apiKey}&units=metric`);
                        if (!response.ok) {
                            throw new Error('Could not fetch weather for your location.');
                        }
                        const data = await response.json();
                        displayWeatherData(data);
                    } catch (error) {
                        showError(error.message);
                    }
                }, () => {
                    showError('Location access denied. Please allow location access or search for a city.');
                });
            } else {
                showError('Geolocation is not supported by your browser.');
            }
        }

        function displayWeatherData(data) {
            cityName.textContent = `${data.name}, ${data.sys.country}`;
            temperature.textContent = `${Math.round(data.main.temp)}°C`;
            description.textContent = data.weather[0].description;
            feelsLike.textContent = `${Math.round(data.main.feels_like)}°C`;
            humidity.textContent = `${data.main.humidity}%`;
            windSpeed.textContent = `${data.wind.speed.toFixed(1)} m/s`;

            const iconName = getWeatherIcon(data.weather[0].icon);
            weatherIcon.innerHTML = `<i data-lucide="${iconName}" class="w-20 h-20 text-yellow-300"></i>`;
            
            lucide.createIcons();
            showWeather();
        }

        function getWeatherIcon(iconCode) {
            switch (iconCode) {
                case '01d': return 'sun';
                case '01n': return 'moon';
                case '02d': return 'cloud-sun';
                case '02n': return 'cloud-moon';
                case '03d':
                case '03n': return 'cloud';
                case '04d':
                case '04n': return 'cloudy';
                case '09d':
                case '09n': return 'cloud-rain';
                case '10d': return 'cloud-sun-rain';
                case '10n': return 'cloud-moon-rain';
                case '11d':
                case '11n': return 'cloud-lightning';
                case '13d':
                case '13n': return 'snowflake';
                case '50d':
                case '50n': return 'wind';
                default: return 'sun';
            }
        }

        // Initialize Lucide icons on page load
        lucide.createIcons();
    </script>
</body>
</html>

